<form nz-form [formGroup]="form" (ngSubmit)="submitForm()" >
  <nz-spin [nzSpinning]="spinning">
    <nz-form-item>
      <nz-form-label [nzSpan]="4" nzRequired>委托协议号</nz-form-label>
      <nz-form-control [nzSpan]="10" [nzErrorTip]="form.controls.contNo.errors?.explain">
        <input nz-input formControlName="contNo" placeholder="请输入委托协议号" />
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSm]="4" [nzXs]="24" nzRequired>协议有效期</nz-form-label>
      <nz-form-control [nzSm]="16" [nzXs]="24"
                       [nzErrorTip]="form.controls.startDate.errors?.explain || '' + form.controls.endDate.errors?.explain || ''">
        <nz-date-picker formControlName="startDate" [nzFormat]="'yyyy-MM-dd'" style="width: 140px;"
                        nzPlaceHolder="开始日期"></nz-date-picker>
        ~
        <nz-date-picker formControlName="endDate" [nzFormat]="'yyyy-MM-dd'" style="width: 140px;"
                        nzPlaceHolder="结束日期"></nz-date-picker>
      </nz-form-control>
    </nz-form-item>
    <nz-tabset [nzTabBarStyle]="{ 'margin-left': '25px', 'text-align':'left'}">
      <nz-tab nzTitle="收费规则">

    <nz-form-item >

      <nz-form-item>
        <nz-form-label [nzSpan]="4">收费规则描述</nz-form-label>
        <nz-form-control nzValidateStatus="false" [nzSpan]="16" nzHasFeedback  [nzErrorTip]="form.controls.feeRuleDescription.errors?.explain">
        <textarea nz-input formControlName="feeRuleDescription" maxlength="2000" style="width: 600px;" placeholder="请输入描述"
                  [nzAutosize]="{minRows: 8,maxRows: 8}"></textarea>
        </nz-form-control>
      </nz-form-item>
      <nz-form-label  [nzSpan]="4" >收费规则附件</nz-form-label>
      <nz-form-control [nzSpan]="8">
        <nz-upload nzListType="picture"
                   nzName="file"
                   [(nzFileList)]="imgFileList"
                   [nzAction]="uploadAction"
                   [nzBeforeUpload]="beforeUpload"
                   (nzChange)="handleChange($event)"
                   [nzPreview]="handlePreview">
          <button nz-button type="button"><i nz-icon nzType="upload"></i><span>上传</span></button>
        </nz-upload>
        <nz-modal
          [nzVisible]="previewVisible"
          [nzContent]="modalContent"
          [nzFooter]="null"
          (nzOnCancel)="previewVisible = false">
          <ng-template #modalContent>
            <img [src]="previewImage" [ngStyle]="{ width: '100%' }"/>
          </ng-template>
        </nz-modal>
      </nz-form-control>
    </nz-form-item>

      </nz-tab>
      <nz-tab nzTitle="服务标准">

        <nz-form-item>
          <nz-form-label [nzSpan]="4">服务标准描述</nz-form-label>
          <nz-form-control nzValidateStatus="false" [nzSpan]="16" nzHasFeedback  [nzErrorTip]="form.controls.feeRuleDescription.errors?.explain">
        <textarea nz-input formControlName="serviceStandardNote" maxlength="2000" style="width: 600px;" placeholder="请输入描述"
                  [nzAutosize]="{minRows: 8,maxRows: 8}"></textarea>
          </nz-form-control>
        </nz-form-item>
    <nz-form-item >
      <nz-form-label  [nzSpan]="4" >服务标准附件</nz-form-label>
      <nz-form-control [nzSpan]="8">
        <nz-upload nzListType="picture"
                   nzName="file"
                   [(nzFileList)]="serviceImgFileList"
                   [nzAction]="uploadAction"
                   [nzBeforeUpload]="beforeUpload"
                   (nzChange)="handleChange($event)"
                   [nzPreview]="handlePreview">
          <button nz-button type="button"><i nz-icon nzType="upload"></i><span>上传</span></button>
        </nz-upload>
        <nz-modal
          [nzVisible]="previewVisible"
          [nzContent]="modalContent"
          [nzFooter]="null"
          (nzOnCancel)="previewVisible = false">
          <ng-template #modalContent>
            <img [src]="previewImage" [ngStyle]="{ width: '100%' }"/>
          </ng-template>
        </nz-modal>
      </nz-form-control>
    </nz-form-item>

      </nz-tab>
    </nz-tabset>
  </nz-spin>
</form>
<div *nzModalFooter>
  <button nz-button type="button" (click)="destroyModal()" class="button-modal-cancel">取消</button>
  <button nz-button nzType="primary"  (click)="submitForm()"  [disabled]="!form.valid"  class="button-modal-submit" >提交</button>
</div>
