<form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm(validateForm.value)">
  <nz-spin [nzSpinning]="spinning">
    <nz-form-item>
      <nz-form-label [nzSpan]="4">人员姓名</nz-form-label>
      <nz-form-control [nzSpan]="16">
        {{userSkill.userName}}
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="4" nzRequired>委托商</nz-form-label>
      <nz-form-control [nzSpan]="16" nzHasFeedback [nzErrorTip]="demanderCorpErrorTpl">
        <nz-select
          formControlName="demanderCorp"
          style="width: 400px;"
          nzShowSearch
          nzAllowClear
          nzPlaceHolder="请选择委托商"
          [nzFilterOption]="nzFilterOption"
          (nzFocus)="listDemanderCorp()"
          (ngModelChange)="changeCorp()">
          <nz-option *ngFor="let o of demanderCorpOptions" [nzLabel]="o.demanderCorpName"
                     [nzValue]="o.demanderCorp"></nz-option>
          <nz-option *ngIf="demanderCorpOptionLoading" nzDisabled nzCustomContent>
            <i nz-icon nzType="loading" class="loading-icon"></i> 加载数据中
          </nz-option>
        </nz-select>
        <ng-template #demanderCorpErrorTpl let-control>
          <ng-container *ngIf="control.hasError('required')">
            请选择委托商！
          </ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="4">工单类型</nz-form-label>
      <nz-form-control [nzSpan]="16" nzHasFeedback>
        <nz-select
          [nzMaxTagPlaceholder]="workTypePlaceHolder"
          nzMode="multiple"
          nzAllowClear
          nzPlaceHolder="请选择工单类型"
          formControlName="workTypeList"
          style="width: 400px"
          [nzFilterOption]="nzFilterOption"
          (nzFocus)="listWorkType()">
          <nz-option *ngFor="let option of workTypeOptions" [nzLabel]="option.name"
                     [nzValue]="option.id"></nz-option>
          <nz-option *ngIf="workTypeOptionLoading" nzDisabled nzCustomContent>
            <i nz-icon nzType="loading" class="loading-icon"></i> 加载数据中
          </nz-option>
        </nz-select>
        <ng-template #workTypePlaceHolder let-selectedList> 还有 {{ selectedList.length }} 项被选择</ng-template>
      </nz-form-control>
    </nz-form-item>


    <nz-form-item>
      <nz-form-label [nzSpan]="4">设备大类</nz-form-label>
      <nz-form-control [nzSpan]="16" nzHasFeedback>
        <nz-select
          style="width: 400px;"
          nzShowSearch
          nzServerSearch
          nzAllowClear
          nzPlaceHolder="请选择设备大类"
          [nzFilterOption]="nzFilterOption"
          (nzOnSearch)="matchDeviceLargeClass($event)"
          formControlName="largeClassId"
          (ngModelChange)="changeDeviceLargeClass()">
          <nz-option *ngFor="let o of deviceLargeClassOptions" [nzLabel]="o.name" [nzValue]="o.id"></nz-option>
          <nz-option *ngIf="deviceLargeClassOptionLoading" nzDisabled nzCustomContent>
            <i nz-icon nzType="loading" class="loading-icon"></i> 加载数据中
          </nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>


    <nz-form-item>
      <nz-form-label [nzSpan]="4">设备类型</nz-form-label>
      <nz-form-control [nzSpan]="16" nzHasFeedback>
        <nz-select
          [nzMaxTagPlaceholder]="smallClassPlaceHolder"
          nzMode="multiple"
          nzAllowClear
          nzPlaceHolder="请选择设备类型"
          formControlName="smallClassIdList"
          style="width: 400px"
          [nzFilterOption]="nzFilterOption"
          (nzOnSearch)="matchDeviceSmallClass($event)"
          (ngModelChange)="changeDeviceSmallClass()">
          <nz-option *ngFor="let option of deviceSmallClassOptions" [nzLabel]="option.name"
                     [nzValue]="option.id"></nz-option>
          <nz-option *ngIf="deviceSmallClassOptionLoading" nzDisabled nzCustomContent>
            <i nz-icon nzType="loading" class="loading-icon"></i> 加载数据中
          </nz-option>
        </nz-select>
        <ng-template #smallClassPlaceHolder let-selectedList> 还有 {{ selectedList.length }} 项被选择</ng-template>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="4">设备品牌</nz-form-label>
      <nz-form-control [nzSpan]="16" nzHasFeedback>
        <nz-select
          [nzMaxTagPlaceholder]="deviceBrandPlaceHolder"
          nzMode="multiple"
          nzAllowClear
          nzPlaceHolder="请选择设备品牌"
          formControlName="brandIdList"
          style="width: 400px"
          [nzFilterOption]="nzFilterOption"
          (nzOnSearch)="matchDeviceBrand($event)"
          (ngModelChange)="changeDeviceBrand()">
          <nz-option *ngFor="let option of deviceBrandOptions" [nzLabel]="option.name"
                     [nzValue]="option.id"></nz-option>
          <nz-option *ngIf="deviceBrandOptionLoading" nzDisabled nzCustomContent>
            <i nz-icon nzType="loading" class="loading-icon"></i> 加载数据中
          </nz-option>
        </nz-select>
        <ng-template #deviceBrandPlaceHolder let-selectedList> 还有 {{ selectedList.length }} 项被选择</ng-template>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="4">设备型号</nz-form-label>
      <nz-form-control [nzSpan]="16" nzHasFeedback>
        <nz-select
          [nzMaxTagPlaceholder]="deviceModelPlaceHolder"
          nzMode="multiple"
          nzAllowClear
          nzPlaceHolder="请选择设备型号"
          formControlName="modelIdList"
          style="width: 400px"
          [nzFilterOption]="nzFilterOption"
          (nzOnSearch)="matchDeviceModel($event)">
          <nz-option *ngFor="let option of deviceModelOptions" [nzLabel]="option.name"
                     [nzValue]="option.id"></nz-option>
          <nz-option *ngIf="deviceModelOptionLoading" nzDisabled nzCustomContent>
            <i nz-icon nzType="loading" class="loading-icon"></i> 加载数据中
          </nz-option>
        </nz-select>
        <ng-template #deviceModelPlaceHolder let-selectedList> 还有 {{ selectedList.length }} 项被选择</ng-template>
      </nz-form-control>
    </nz-form-item>

  </nz-spin>
</form>

<div *nzModalFooter>
  <button nz-button type="button" (click)="destroyModal()" class="button-modal-cancel">取消</button>
  <button nz-button nzType="primary"  (click)="submitForm(validateForm.value)"  [disabled]="!validateForm.valid"  class="button-modal-submit" >提交</button>
</div>
