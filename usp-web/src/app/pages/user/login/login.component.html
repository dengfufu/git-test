<div class="main">
  <div class="login">
    <form nz-form [formGroup]="form" (ngSubmit)="submit()" role="form">
      <nz-tabset [nzAnimated]="false" class="tabs" (nzSelectChange)="switch($event)">
        <nz-tab [nzTitle]="'账户密码登录'">
          <nz-form-item>
            <nz-form-control [nzErrorTip]="mobileErrorTip1">
              <nz-input-group nzSize="large" nzPrefixIcon="user">
                <input nz-input formControlName="mobile" placeholder="请输入手机号" [nzAutocomplete]="auto"/>
                <nz-autocomplete [nzDataSource]="mobiles" #auto></nz-autocomplete>
              </nz-input-group>
              <ng-template #mobileErrorTip1 let-i>
                <ng-container *ngIf="i.errors.required">请输入手机号！</ng-container>
                <ng-container *ngIf="i.errors.pattern">手机号格式错误！</ng-container>
              </ng-template>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-control nzErrorTip="请输入密码！">
              <nz-input-group nzSize="large" nzPrefixIcon="lock">
                <input nz-input type="password" formControlName="password" placeholder="请输入密码"/>
              </nz-input-group>
            </nz-form-control>
          </nz-form-item>

          <nz-form-item>
            <nz-form-control nzErrorTip="请输入验证码！">
              <nz-row [nzGutter]="8">
                <nz-col [nzSpan]="16">
                  <nz-input-group nzSize="large" nzPrefixIcon="mail">
                    <input nz-input formControlName="captchaCode" maxlength="4" placeholder="验证码"/>
                  </nz-input-group>
                </nz-col>
                <nz-col [nzSpan]="8" style="text-align: center">
                  <img [src]="captchaBase64" (click)="getImageCaptcha()">
                </nz-col>
              </nz-row>
            </nz-form-control>
          </nz-form-item>
        </nz-tab>

        <nz-tab [nzTitle]="'短信快捷登录'">
          <nz-form-item>
            <nz-form-control [nzErrorTip]="mobileErrorTip2">
              <nz-input-group nzSize="large" nzPrefixIcon="user">
                <input nz-input formControlName="mobile" placeholder="请输入手机号"/>
              </nz-input-group>
              <ng-template #mobileErrorTip2 let-i>
                <ng-container *ngIf="i.errors.required">请输入手机号！</ng-container>
                <ng-container *ngIf="i.errors.pattern">手机号格式错误！</ng-container>
              </ng-template>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-control [nzErrorTip]="captchaErrorTip2">
              <nz-row [nzGutter]="8">
                <nz-col [nzSpan]="16">
                  <nz-input-group nzSize="large" nzPrefixIcon="mail">
                    <input nz-input formControlName="captcha" maxlength="6" placeholder="验证码"/>
                  </nz-input-group>
                </nz-col>
                <nz-col [nzSpan]="8">
                  <button
                    type="button"
                    nz-button
                    nzSize="large"
                    (click)="getCaptcha()"
                    [disabled]="count"
                    nzBlock>
                    {{ count ? count + 's' : '获取验证码' }}
                  </button>
                </nz-col>
              </nz-row>
            </nz-form-control>
            <ng-template #captchaErrorTip2 let-i>
              <ng-container *ngIf="i.errors.required">请输入验证码！</ng-container>
              <ng-container *ngIf="i.errors.pattern">验证码格式错误！</ng-container>
            </ng-template>
          </nz-form-item>
        </nz-tab>
      </nz-tabset>

      <nz-form-item class="other">
        <button nz-button type="submit" nzType="primary" nzSize="large" nzBlock [nzLoading]="isLoading">
          登录
        </button>
      </nz-form-item>
      <nz-form-item>
        <nz-col [nzSpan]="12" style="text-align: left;">
          <a class="forgot" routerLink="/user/forget">忘记密码</a>
        </nz-col>
        <nz-col [nzSpan]="12" style="text-align: right;">
          <a class="register" routerLink="/user/register">注册用户</a>
        </nz-col>
      </nz-form-item>
      <div style="padding-top: 17.6px;"></div>
    </form>
  </div>
</div>
