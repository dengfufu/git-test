<my-pro-page-header-wrapper>
  <nz-layout>
    <nz-content>
      <nz-card [nzBordered]="false">
        <div class="edit-button-div">
          <!--<i  nz-icon nzType="plus-circle" nzTheme="outline" class="icon-add" (click)="addModal()" nz-tooltip
              nzTooltipTitle="新建" [acl]="{ability: [aclRight.RIGHT_URL_ADD]}"></i>
          <i nz-icon nzType="anyfix:filtrate" nzTheme="outline" class="img-filtrate" (click)="openDrawer()" nz-tooltip
             nzTooltipTitle="筛选"></i>-->
          <button nz-button  class="icon-add" nzShape="round"  (click)="addModal()" [acl]="{ability: [aclRight.RIGHT_URL_ADD]}">新建</button>
          <button nz-button  class="img-filtrate" nzShape="round"  (click)="openDrawer()">筛选</button>
        </div>
        <ng-template #totalTemplate let-total> 共 {{ total }} 条 </ng-template>
        <nz-table #headerTable
                  nzShowSizeChanger
                  nzBordered
                  [nzFrontPagination]="false"
                  [nzData]="list"
                  [nzLoading]="loading"
                  [nzTotal]="page.total"
                  [(nzPageIndex)]="page.pageNum"
                  [(nzPageSize)]="page.pageSize"
                  [nzShowTotal]="totalTemplate"
                  (nzPageIndexChange)="queryAuthRight()"
                  (nzPageSizeChange)="queryAuthRight(true)">
          <thead>
          <tr>
            <th nzWidth="50px">序号</th>
            <th>权限名称</th>
            <th>请求路径</th>
            <th>是否公共权限</th>
            <th>请求方法</th>
            <th nzWidth="100px" [acl]="{ability: [aclRight.RIGHT_URL_MOD, aclRight.RIGHT_URL_DEL]}">操作</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let data of headerTable.data;let index = index">
            <td>{{ page.getNo(index) }}</td>
            <td>{{ data.rightName }}</td>
            <td>{{ data.uri }}</td>
            <td>
              <label *ngIf="data.rightType == '1'">是</label>
              <label *ngIf="data.rightType != '1'">否</label>
            </td>
            <td>{{ data.pathMethod }}</td>
            <td [acl]="{ability: [aclRight.RIGHT_URL_MOD, aclRight.RIGHT_URL_DEL]}">
              <a [acl]="{ability: [aclRight.RIGHT_URL_MOD]}" (click)="editModal(data)">编辑</a>
              <nz-divider [acl]="{ability: [aclRight.RIGHT_URL_MOD, aclRight.RIGHT_URL_DEL], mode: 'allOf'}"
                          nzType="vertical"></nz-divider>
              <a [acl]="{ability: [aclRight.RIGHT_URL_MOD, aclRight.RIGHT_URL_DEL]}"
                 (click)="showDeleteConfirm(data.id)">删除</a>
            </td>
          </tr>
          </tbody>
        </nz-table>
      </nz-card>
    </nz-content>
    <nz-drawer nzTitle="权限定义筛选" [nzVisible]="drawerVisible" nzWidth="300px" (nzOnClose)="closeDrawer()"
               [nzClosable]="'true'">
      <form nz-form [nzLayout]="'inline'" [formGroup]="searchForm">
        <nz-form-item>
          <nz-form-label nzFor="roleName">权限名称</nz-form-label>
          <nz-form-control>
            <nz-tree-select
              style="width: 250px"
              [nzDropdownStyle]="{'max-height': '500px'}"
              [nzNodes]="rightTree"
              nzShowSearch
              nzPlaceHolder="请选择权限名称"
              formControlName="rightId">
            </nz-tree-select>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-label nzFor="roleName">请求路径</nz-form-label>
          <nz-form-control>
            <input nz-input formControlName="uri" style="width: 250px;" placeholder="请输入请求路径"/>
          </nz-form-control>
        </nz-form-item>
        <div style="text-align: right;margin-top: 40px">
          <button class="ant-btn" style="margin-left: 8px;margin-right: 10px;" nz-button (click)="clearDrawer();"><span>清空筛选</span>
          </button>
          <button nz-button [nzType]="'primary'" (click)="closeDrawer();queryAuthRight(true)">查询</button>
        </div>
      </form>
    </nz-drawer>
  </nz-layout>
</my-pro-page-header-wrapper>
