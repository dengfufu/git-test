<form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm(validateForm.value)">
  <nz-spin [nzSpinning]="spinning">
    <nz-form-item>
      <nz-form-label [nzSpan]="4" nzRequired>委托商</nz-form-label>
      <nz-form-control [nzSpan]="16" [nzErrorTip]="validateForm.controls.corp.errors?.explain">
        <nz-select nzShowSearch formControlName="corp" nzPlaceHolder="请选择委托商" style="width: 400px;">
          <nz-option *ngFor="let demanderCorp of demanderCorpList" [nzValue]="demanderCorp.demanderCorp"
                     [nzLabel]="demanderCorp.demanderCorpName"></nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4">品牌LOGO</nz-form-label>
      <nz-form-control [nzSpan]="16" nzHasFeedback>
        <nz-upload
          nzListType="picture-card"
          [(nzFileList)]="fileList"
          [nzBeforeUpload]="beforeUpload"
          [nzAction]="uploadAction"
          (nzChange)="handleChange($event)"
          [nzShowButton]="fileList.length < 1"
          [nzRemove]="removeFile"
          [nzPreview]="handlePreview"
        >
          <i class="upload-icon" nz-icon [nzType]="loading ? 'loading' : 'plus'"></i>
          <div class="ant-upload-text">Upload</div>
        </nz-upload>
        <nz-modal
          [nzVisible]="previewVisible"
          [nzContent]="modalContent"
          [nzFooter]="null"
          (nzOnCancel)="previewVisible = false"
        >
          <ng-template #modalContent>
            <img [src]="previewImage" [ngStyle]="{ width: '100%' }"/>
          </ng-template>
        </nz-modal>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4" nzRequired>品牌名称</nz-form-label>
      <nz-form-control [nzSpan]="16" nzHasFeedback [nzErrorTip]="nameErrorTpl">
        <input nz-input formControlName="name"  style="width: 400px;" placeholder="请输入品牌名称"/>
        <ng-template #nameErrorTpl let-control>
          <ng-container *ngIf="control.hasError">
            {{control.errors?.explain}}
          </ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4">品牌简称</nz-form-label>
      <nz-form-control [nzSpan]="16" nzHasFeedback [nzErrorTip]="shortNameErrorTpl">
        <input nz-input formControlName="shortName" maxlength="20" style="width: 400px;" placeholder="请输入品牌简称"/>
        <ng-template #shortNameErrorTpl let-control>
          <ng-container *ngIf="control.hasError('maxlength')">
            不能超过20个字符！
          </ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4">网址</nz-form-label>
      <nz-form-control [nzSpan]="16" nzHasFeedback [nzErrorTip]="websiteErrorTpl">
        <input nz-input formControlName="website" maxlength="50" style="width: 400px;" placeholder="请输入网址">
        <ng-template #websiteErrorTpl let-control>
          <ng-container *ngIf="control.hasError('maxlength')">
            不能超过50个字符！
          </ng-container>
          <nz-form-explain *ngIf="this.validateForm.controls.website.errors">{{ '网址格式错误！' }}</nz-form-explain>
        </ng-template>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="4">描述</nz-form-label>
      <nz-form-control nzValidateStatus="false" [nzSpan]="16" nzHasFeedback [nzErrorTip]="descriptionErrorTpl">
        <textarea nz-input formControlName="description" maxlength="200" style="width: 400px;" placeholder="请输入描述"
                  [nzAutosize]="{minRows: 2,maxRows: 5}"></textarea>
        <ng-template #descriptionErrorTpl let-control>
          <ng-container *ngIf="control.hasError('maxlength')">
            不能超过200个字符！
          </ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>
    <text-area-word-number currentNumber="{{validateForm.value.description.length}}"
                           totalCount="200" ></text-area-word-number>

    <nz-form-item>
      <nz-form-label [nzSpan]="4">是否可用</nz-form-label>
      <nz-form-control [nzSpan]="16">
        <nz-switch formControlName="enabled" nzCheckedChildren="是" nzUnCheckedChildren="否"></nz-switch>
      </nz-form-control>
    </nz-form-item>
  </nz-spin>
</form>
<div *nzModalFooter>
  <button nz-button type="button" (click)="destroyModal()" class="button-modal-cancel">取消</button>
  <button nz-button nzType="primary"  (click)="submitForm(validateForm.value)"  [disabled]="!validateForm.valid"  class="button-modal-submit" >提交</button>
</div>
