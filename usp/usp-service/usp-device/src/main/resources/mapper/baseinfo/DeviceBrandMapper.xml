<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zjft.usp.device.baseinfo.mapper.DeviceBrandMapper">

    <!-- 模糊查询设备品牌列表 -->
    <select id="matchDeviceBrand" resultType="com.zjft.usp.device.baseinfo.model.DeviceBrand">
        select * from device_brand where 1=1 and corp=#{deviceBrandFilter.corp}
        <if test='deviceBrandFilter.matchFilter != null and deviceBrandFilter.matchFilter != ""'>
            and name like concat('%',#{deviceBrandFilter.matchFilter},'%')
        </if>
        <if test='deviceBrandFilter.enabled != null and deviceBrandFilter.enabled != ""'>
            and enabled = #{deviceBrandFilter.enabled}
        </if>
        order by name asc limit 0,50
    </select>

    <select id="listDeviceBrand" resultType="com.zjft.usp.device.baseinfo.model.DeviceBrand">
        select * from device_brand where 1=1
            and id in(select brand_id from device_model where small_class_id=#{deviceBrandFilter.smallClassId})
    </select>

</mapper>
